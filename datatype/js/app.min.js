function showInfo(e,t){allRows=_.sortBy(t.sheets("Completed Detailed Data").all(),"Department"),filterByDatatype(pageType)}function filterByDatatype(e){clearCards(),updateCards(allRows,[buildDatatypeFilter(e)])}function clearCards(){$("#cards").empty()}function buildDatatypeFilter(e){return e?function(t){return t["Type of Data"]===e}:!1}function updateCards(e,t){var t=t||[],a=$("#card-template").html(),n=Handlebars.compile(a);_.chain(e).filter(function(e){return _.all(t,function(t){return t(e)})}).map(function(e){e.free=e["Data is freely available online"],e.machine=e["Data is machine readable"],e.context=e["Context is provided"],e.bulk=e["Available in bulk"],e.fresh=e["Up-to-date"],e.incident=e["Incident-level data"],e.freeCaption=captions.free[e.free],e.machineCaption=captions.machine[e.machine],e.contextCaption=captions.context[e.context],e.bulkCaption=captions.bulk[e.bulk],e.freshCaption=captions.fresh[e.fresh],e.incidentCaption=captions.incident[e.incident],e.free=e["Data is freely available online"],e.machine=e["Data is machine readable"],e.context=e["Context is provided"],e.bulk=e["Available in bulk"],e.fresh=e["Up-to-date"],e.incident=e["Incident-level data"],e.freeCaption=captions.free[e.free],e.machineCaption=captions.machine[e.machine],e.contextCaption=captions.context[e.context],e.bulkCaption=captions.bulk[e.bulk],e.freshCaption=captions.fresh[e.fresh],e.incidentCaption=captions.incident[e.incident];var t=n(e);$("#cards").append(t),$('[data-toggle="tooltip"]').tooltip()})}$(document).ready(function(){Tabletop.init({key:"1lv74SigFdFMJvza_dc2tBVd37r9E4-CPeY9YkRSaBxA",callback:showInfo,parseNumbers:!0})});var allRows=[];